<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ TITLE }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta charset="UTF-8" />

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .questionclass{
        width:100%;
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
     <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <!---
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/static/ico/apple-touch-icon-57-precomposed.png"> -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
        $(function() {
          $(".update_page").change(function(){
            $(".query_form").submit();
          });
        $( "#fromdate" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 1,
        minDate:"01/01/1900",
        onClose: function( selectedDate ) {
        $( "#todate" ).datepicker( "option", "minDate", selectedDate );
        }
        });
        $( "#todate" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        changeYear: true,
        numberOfMonths: 1,
        onClose: function( selectedDate ) {
        $( "#fromdate" ).datepicker( "option", "maxDate", selectedDate );
        }
        });
        });
    </script>




    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">

      google.load("visualization", "1", {packages:['table']});
      

      var currentquestion1 = '{{currentquestion1}}';
      var currentquestion2 = '{{currentquestion2}}';

      var summary_data = {% if summary_data %} {{summary_data|safe}} {% else %} "" {% endif %}    ;

      if (summary_data != ""){
        google.setOnLoadCallback(drawTable);
        summary_output_object = summary_data;
        //var parsestring = utf8_encode(summary_data.replace(/&quot;/g, "\""));
        //var summary_output_object = $.parseJSON(parsestring);    
      }

      


      function drawTable() {
        var data = new google.visualization.DataTable();
        var mysummarydata = summary_output_object.slice();
        {{addColumn_commands|safe}}

        data.addRows(mysummarydata);
        var table = new google.visualization.Table(document.getElementById('data_table'));
        table.draw(data, {showRowNumber: true});
      }
      </script>
    
  </head>

  <body>

    {% include "upperblock.html" %}

     <div class="container-fluid">
      <div class="row-fluid">


          <div class="row-fluid">
            <span class="error_box">
              <ul>
                {{error_messages|safe}}
              </ul>
            </span>
            <div class="span4">
              <h2>Choose Options</h2>
                 <p>
                  <form action="/avanse/tables" method="get" class="query_form">
                    <select name="survey_name" class="update_page questionclass" >
                      {{survey_options|safe}}
                    </select>


                    <p>Search by string</p><select name="questionstring" class="questionclass" value="{{questionstring_value}}">
                      {{questionstring_options|safe}}
                    </select>

                    <p>Value equals</p><input type="text" name="questionstring_search" class="questionclass" value="{{questionstring_search_option}}" />

                    <p>Search by number</p><select name="questionnumber" class="questionclass">
                      {{questionnumber_options|safe}}
                    </select>
                    <p>Operator</p><select name="questionnumber_operator" class="questionclass">
                      {{questionnumber_operator_options|safe}}
                    </select>

                    <p>Value</p><input type="text" name="questionnumber_search" class="questionclass" value="{{questionnumber_search_option}}">


                    <p>Search by date</p><select name="questiondate" class="questionclass">
                      {{questiondate_options|safe}}
                    </select>
                    <label for="fromdate">From</label>
                    <input type="text" id="fromdate" name="fromdate" value="{{fromdate_option|safe}}"/>
                    <label for="todate">to</label>
                    <input type="text" id="todate" name="todate" value="{{todate_option|safe}}"/>

                    
                    <p>Select which columns to display</p>
                    <select multiple name="columnselect" size=10 class="questionclass">
                      {{columnselect_value_options|safe}}
                    </select>
                    
                    <input type="submit" name="submit_button" value="Submit" />

                  </form>
                </p>
            </div><!--/span-->

          </div><!--/row-->

        </div><!--/span-->
      </div><!--/row-->
    <div class="container-fluid">
      <div class="row-fluid">  

    <div class="container-fluid">
      <div class="row-fluid">


          <div class="row-fluid">
            <div class="span12">
              <h2>Data Table</h2>
                 <p><div id="data_table" style="width:100%;"></div></p>
            </div><!--/span-->

          </div><!--/row-->

        </div><!--/span-->
      </div><!--/row-->


      <hr>

      <footer>
        <p>&copy; Company 2012</p>
      </footer>

    </div>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>

  </body>
</html>
